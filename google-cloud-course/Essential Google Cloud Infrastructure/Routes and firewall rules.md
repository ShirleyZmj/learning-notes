
**内容总结：**

这段内容详细介绍了GCP中的路由（Routes）和防火墙（Firewall Rules），以及它们如何共同控制网络流量。主要包括以下几个方面：

- **路由（Routes）：**
    - 默认情况下，每个网络都有路由，允许实例之间直接通信，以及通过默认路由访问外部网络。
    - 用户可以创建自定义路由，覆盖默认路由。
    - 路由匹配目标IP地址，但流量流动还需防火墙规则的配合。
    - 路由适用于匹配网络和实例标签的实例，如果没有标签，则适用于网络中的所有实例。
    - 每个网络的核心都有一个可大规模扩展的虚拟路由器。
- **防火墙规则（Firewall Rules）：**
    - GCP防火墙规则保护VM实例免受未经批准的入站（ingress）和出站（egress）连接。
    - VPC网络充当分布式防火墙，规则在实例级别应用。
    - 防火墙规则是状态化的（stateful），一旦连接建立，双向通信都将被允许。
    - 如果删除所有防火墙规则，仍有隐含的“拒绝所有入站”和“允许所有出站”规则。
    - 防火墙规则的参数包括：方向（ingress/egress）、源/目标、协议/端口、操作（allow/deny）、优先级和规则分配。
- **出站（Egress）防火墙规则：**
    - 控制GCP网络内部发起的出站连接。
    - 允许或拒绝特定协议、端口和IP地址的出站连接。
    - 可以使用目标CIDR范围来保护VM实例免受外部主机或内部GCP CIDR范围的连接。
- **入站（Ingress）防火墙规则：**
    - 保护实例免受来自任何源的入站连接。
    - 允许或拒绝特定协议、端口和IP地址范围的入站连接。
    - 可以使用源CIDR范围来保护实例免受外部网络或GCP IP范围的连接。

**考点和答案：**

1. **考点：GCP路由的作用是什么？路由和防火墙规则的关系是什么？**
    
    - **答案：**GCP路由决定数据包的转发路径。路由匹配目标IP地址，但流量流动还需防火墙规则的配合，防火墙规则决定是否允许流量通过。
2. **考点：GCP防火墙规则的特点是什么？**
    
    - **答案：**GCP防火墙规则是状态化的（stateful），在实例级别应用，并且如果删除所有防火墙规则，仍有隐含的“拒绝所有入站”和“允许所有出站”规则。
3. **考点：GCP防火墙规则的参数有哪些？**
    
    - **答案：**GCP防火墙规则的参数包括：方向（ingress/egress）、源/目标、协议/端口、操作（allow/deny）、优先级和规则分配。
4. **考点：出站（Egress）防火墙规则的作用是什么？如何使用目标CIDR范围？**
    
    - **答案：**出站防火墙规则控制GCP网络内部发起的出站连接。目标CIDR范围可以用于保护VM实例免受外部主机或内部GCP CIDR范围的连接。
5. **考点：入站（Ingress）防火墙规则的作用是什么？如何使用源CIDR范围？**
    
    - **答案：**入站防火墙规则保护实例免受来自任何源的入站连接。源CIDR范围可以用于保护实例免受外部网络或GCP IP范围的连接。
6. **考点：GCP的虚拟路由器的作用是什么？**
    
    - **答案：**GCP的虚拟路由器，处于每个网络的核心，将每一个VM实例都连接到这个路由器上，并且每一个流出VM实例的流量，都会优先通过这个虚拟路由器，然后才会被转发到下一个跃点。
7. **考点：默认情况下，GCP的网络，是否会存在防火墙规则？**
    
    - **答案：**默认情况下，默认的网络，会存在预先设置好的防火墙规则，这些规则允许同一个网络中的所有实例互相通信，但是用户自己创建的网络，不存在这样的规则，需要用户自行创建。
